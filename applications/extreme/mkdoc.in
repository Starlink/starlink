#!/bin/sh

#  Put autogenerated routine descriptions in SSN/73.
     PATH=$PATH:@STARLINK@/bin/sst
     export PATH
     rm -f inscnf.tex frepint.tex crepint.tex \
           extmk.tex extmakefile.tex do-filter.tex cmp-filter.tex
     for f in inscnf frepint crepint extmk extmakefile do-xxx cmp-xxx
     do
        rm -f $f.tex
        case $f in
           inscnf | frepint | crepint)
              in=$f.c
              ;;
           extmk | extmakefile | do-xxx | cmp-xxx)
              sed 's/^#/\*/' <$f >tmp
              in=tmp
              ;;
        esac
        @PROLAT@ in=$in out=$f.tex nodocument single
     done

     for f in do-xxx cmp-xxx
     do
        sprog=""
        for p in crepint frepint inscnf do-xxx cmp-xxx
        do
           if [ "$f" = "$p" ]
           then
              :
           else
              sprog="$sprog -e 's/ $p / \\\\xroutine{$p} /'"
           fi
        done
        eval "sed $sprog" < $f.tex > tmp.tex
        mv tmp.tex $f.tex
     done

     sed -n '1,/%%%% Begin filter descriptions/p' <ssn73-pre.tex >tmp.ssn73.tex
     cat \
        crepint.tex \
        frepint.tex \
        inscnf.tex \
        extmk.tex \
        extmakefile.tex \
        cmp-xxx.tex \
        do-xxx.tex \
           >>tmp.ssn73.tex
     sed -n '/%%%% End filter descriptions/,$p' <ssn73-pre.tex >>tmp.ssn73.tex
     mv tmp.ssn73.tex ssn73.tex

