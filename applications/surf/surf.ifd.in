# -*- tcl -*-

package surf {

   version @PACKAGE_VERSION@
   prefix surf

   executable surf_mon {
## REBIN - Rebin the SCUBA data onto a rectangular grid

#+
#  Name:
#     BOLREBIN.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (timj@jach.hawaii.edu)
#     {enter_new_authors_here}


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
# 	 Original version
#     1996 September (TIMJ)
#        Add SELECT_INTS
#     1996 October 29 (TIMJ)
#        Use GLOBAL defaults
#     1996 November 13 (TIMJ)
#        Add NA,AZ output coords
#     1997 January 9 (TIMJ)
#        Comment out defaults and in for REBIN_METHOD (using PAR_CHOIC)
#     1997 April 8 (TimJ)
#        Change USE_INTS to USE_SECTION
#	 Remove SELECT_INTS and INTEGRATIONS
#     1997 April 9 (TimJ)
#	 Add DUMMY to deal with GLOBAL defaults in REF
#     1997 May 9 (TimJ)
#	 Add PL to OUT_COORDS
#     1997 May 21 (TimJ)
#        Add LOOP parameter
#     1997 June 19 (TIMJ)
#        Remove USE_SECTION
#     1997 Spetember 4 (TIMJ)
#        Change message in DUMMY
#     1998 January 22 (TIMJ)
#        Add SIZE, WEIGHTS and TIMES
#     1998 Jun 9 (TIMJ)
#        Add WTFNRAD, SCALE. Position 1 for REF
#     1998 Dec 6 (TIMJ)
#        Add USEGRD
#     1998 Dec 8 (TIMJ)
#        Correct prompt for LONG_OUT
#     1998 Dec 10 (TIMJ)
#        Rename USEGRD to GUARD
#     1999 May 7 (TIMJ)
#        Add TRIM
#     1999 May 28 (TIMJ)
#       Add REFPIX
#     29-JUL-2009 (TIMJ):
#         Change MSG_FILTER defaulting from NORM to ! to support
#         new msgIfget behaviour.
#     {enter_further_changes_here}

#-

      action bolrebin {

         helplib {$SURF_HELP}

         parameter ref {
                        # First reference date file
            position 1
            type _CHAR
            access READ
            ppath GLOBAL
            prompt {Name of first data file to be rebinned}
            helpkey *
          }

         parameter loop {
            type _LOGICAL
            prompt {Ask for multiple input files}
            default TRUE
            vpath default
            helpkey *
          }

         parameter in {
            type _CHAR
            access READ
            vpath PROMPT
            ppath DYNAMIC DEFAULT
            default !
            prompt {Name of next input file to be rebinned}
            helpkey *
          }

         parameter dummy {
# Allows me to read GLOBAL filename
            type NDF
            access READ
            vpath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            prompt {Please ignore (will only appear in prompt mode)}
          }


         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter rebin_method {
            type _CHAR
            prompt {Rebinning method to be used}
#        DEFAULT 'LINEAR'
#	 IN      'BESSEL','LINEAR'
            helpkey *
          }

         parameter weight {
            type _REAL
            prompt {Weight to be assigned to input dataset}
            default 1.0
            helpkey *
          }

         parameter scale {
            type _REAL
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            helpkey *
          }

         parameter wtfnrad {
            type _INTEGER
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            prompt {Radius of weighting function in scale lengths}
            helpkey *
          }


         parameter guard {
            type _LOGICAL
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            prompt {Use a guard ring?}
            helpkey *
          }

         parameter sfactor {
            type _REAL
            prompt {Smoothing factor for spline interpolation}
            helpkey *
          }


         parameter shift_dx {
            type _REAL
            prompt {X shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter shift_dy {
            type _REAL
            prompt {Y shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter out_object {
            type _CHAR
            prompt {Object name for output map}
            help "This name becomes the title of the output map"
            helpkey *
          }

         parameter out_coords {
            type _CHAR
            prompt {Coordinate sys of output map; PL,AZ,NA,RB,RJ,RD or GA}
#	 IN      'RB','RJ','RD','GA', 'NA','AZ','PL'
            helpkey *
          }

         parameter long_out {
            type _CHAR
            prompt {Longitude of output map centre in hh (or dd) mm ss.ss format}
            helpkey *
          }

         parameter lat_out {
            type _CHAR
            prompt {Latitude of output map centre in dd mm ss.ss format}
            helpkey *
          }

         parameter pixsize_out {
            type _REAL
            prompt {Size of pixels in output map (arcsec)}
            default 3.0
            range 0.01 60.0
            helpkey *
          }

         parameter out {
            type _CHAR
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            prompt {Name of container file to contain rebinned map}
            helpkey *
          }

         parameter weights {
            type _LOGICAL
            default FALSE
            prompt {Store the weights array}
            vpath DEFAULT
            helpkey *
          }

         parameter times {
            type _LOGICAL
            default FALSE
            prompt {Store the times array}
            vpath DEFAULT
            helpkey *
          }

         parameter size {
            type _INTEGER
            prompt {Number of pixels in output map (NX,NY)}
            helpkey *
          }

         parameter refpix {
            type _INTEGER
            prompt {Location of reference pixel in output map (X,Y)}
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            helpkey *
          }


         parameter trim {
            type _REAL
            prompt {Size of region to trim from map edge (arcsec)}
            vpath DEFAULT
            default 0.0
            helpkey *
          }

      }
## CALCSKY - calculate sky contribution

#+
#  Name:
#     CALCSKY.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (timj@jach.hawaii.edu)
#     {enter_new_authors_here}


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
# 	 Original version
#     1996 September (TIMJ)
#        Add SELECT_INTS
#     1996 October 29 (TIMJ)
#        Use GLOBAL defaults
#     1996 November 13 (TIMJ)
#        Add NA,AZ output coords
#     1997 January 9 (TIMJ)
#        Comment out defaults and in for REBIN_METHOD (using PAR_CHOIC)
#     1997 April 7 (TimJ)
#	 Change IN and REF to a CHAR
#        Add MSG_FILTER
#     1997 April 8 (TimJ)
#        Change USE_INTS to USE_SECTION
#	 Remove SELECT_INTS and INTEGRATIONS
#     1997 April 9 (TimJ)
#	 Add DUMMY to deal with GLOBAL defaults in REF
#     1997 April 21 (TimJ)
#        Add SFACTOR
#     1997 May 9 (TimJ)
#	 Add PL output coords
#     1997 May 9 (TimJ)
#	 Copy from REBIN.IFL
#        Add FILE. Remove regridding parameters.
#     1997 May 15 (TimJ)
#        Add LOOP parameter
#     1997 June 19 (TIMJ)
#        Remove USE_SECTION
#     1997 Spetember 4 (TIMJ)
#        Change message in DUMMY
#     1997 October 21 (TIMJ)
#        Convert to despike
#     1997 November 11 (TIMJ)
#        Add SMODE. Change default NSIGMA to 4.0
#     1997 November 27 (TIMJ)
#	 Remove LAT_OUT and LONG_OUT
#     1998 May 12 (TIMJ)
#        Add a parameter for writing MEDIAN image
#     1998 May 13 (TIMJ)
#        Convert to CALCSKY
#     1998 Jun 9 (TIMJ)
#        Add BOXSZ. REF now at POSITION 1
#     1999 Jul 15 (TIMJ)
#        Add ADDCHOP, PA and THROW
#     {enter_further_changes_here}

#-

      action calcsky {

         helplib {$SURF_HELP}

         parameter addchop {
            type _LOGICAL
            vpath PROMPT DEFAULT
            ppath DEFAULT
            prompt {Add dual beam chop to source model}
            default FALSE
            helpkey *
          }

         parameter boxsz {
                          # Size of smoothing box
            type _REAL
            ppath DYNAMIC
            vpath PROMPT DYNAMIC
            prompt {Size of smoothing box (seconds)}
            helpkey *
          }

         parameter chop {
            type _REAL
            position 2
            vpath prompt dynamic
            ppath dynamic
            prompt {Chop throw in arcsec}
          }

         parameter pa {
            position 3
            type _REAL
            vpath prompt dynamic
            ppath dynamic
            prompt {Chop position angle (degrees)}
          }


         parameter ref {
                        # First reference date file
            position 1
            type _CHAR
            access READ
            ppath GLOBAL
            prompt {Name of first data file to be processed}
            helpkey *
          }

         parameter loop {
            type _LOGICAL
            prompt {Ask for multiple input files}
            default TRUE
            vpath default
            helpkey *
          }

         parameter in {
            type _CHAR
            access READ
            vpath PROMPT
            ppath DYNAMIC DEFAULT
            default !
            prompt {Name of next input file to be processed}
            helpkey *
          }

         parameter dummy {
# Allows me to read GLOBAL filename
            type NDF
            access READ
            vpath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            prompt {Please ignore (will only appear in prompt mode)}
          }

         parameter model {
            type NDF
            access WRITE
            default !
            prompt {File containing source model}
            helpkey *
          }


         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter weight {
            type _REAL
            prompt {Weight to be assigned to input dataset}
            default 1.0
            helpkey *
          }

         parameter shift_dx {
            type _REAL
            prompt {X shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter shift_dy {
            type _REAL
            prompt {Y shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter out_coords {
            type _CHAR
            prompt {Coordinate sys for sky determination}
#	 IN      'RB','RJ','RD','GA', 'NA','AZ','PL'
            helpkey *
          }

         parameter nosrc {
            type NDF
            access WRITE
            default !
            prompt {File containing source-removed data}
            vpath DEFAULT
            helpkey *
          }

      }
## CHANGE_DATA - Modify data values

#+
#  Name:
#     CHANGE_DATA.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
#        Original Version
#     1996 October (TIMJ)
#        Add GLOBAL associations
#     1996 November 1 (TIMJ)
#        Add header and HELPLIB
#     1997 March 19 (TIMJ)
#	 Separate from MODIFY
#     1997 March 31 (JFL)
#        Use just BAD_QUALITY and IN parameters
#     1997 April 30 (TIMJ)
#        Add MSG_FILTER
#     1997 May 1 (TIMJ)
#        CHANGE_QUALITY.IFL becomes CHANGE_DATA.IFL
#     1997 May 29 (TIMJ)
#        Add SECTION
#     1997 June 19 (TIMJ)
#        Remove USE_SECTION
#     {enter_further_changes_here}

#-

      action change_data {

         helplib {$SURF_HELP}

         parameter comp {
                         # NDF COMPONENT TO BE ANALYSED
            type LITERAL
            access UPDATE
            vpath DEFAULT
            ppath CURRENT DEFAULT
            default DATA
            prompt {NDF array component to analyse}
            helpkey *
#        IN          'DATA', 'ERROR', 'QUALITY', 'VARIANCE'
          }

         parameter in {
            position 1
            type _CHAR
            vpath PROMPT
            prompt {Data to be modified ndf{data-spec}}
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter out {
            position 3
            type FILENAME
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            prompt {Name of output file to contain modified data}
            helpkey *
          }

         parameter section {
            type _CHAR
            access READ
            vpath PROMPT
            ppath Current
            prompt {Please enter a section (including {})}
            helpkey *
          }

         parameter value {
            position 2
            type LITERAL
            default bad
            ppath DEFAULT
            prompt {New data value}
            helpkey *
          }


      }

## CHANGE_FLAT - Modify flatfield

#+
#  Name:
#     CHANGE_FLAT.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
#        Original Version
#     1996 October (TIMJ)
#        Add GLOBAL associations
#     1996 November 1 (TIMJ)
#        Add header and HELPLIB
#     1997 April 30 (TIMJ)
#	 Add MSG_FILTER
#     {enter_further_changes_here}

#-


      action change_flat {

         helplib {$SURF_HELP}

         parameter in {
            position 1
            type FILENAME
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <->GLOBAL.DATA_ARRAY
            prompt {Name of input file containing demodulated map data}
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter new_flat {
            position 2
            type _CHAR
            prompt {The name of the file containing the new flat-field}
            helpkey *
          }

      }

## CHANGE_POINTING - Modify pointing

#+
#  Name:
#     CHANGE_POINTING.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
#        Original Version
#     1996 October (TIMJ)
#        Add GLOBAL associations
#     1996 November 1 (TIMJ)
#        Add header and HELPLIB
#     1997 March 19 (TIMJ)
#	 Becomes CHANGE_POINTING.IFL
#     1997 April 30 (TIMJ)
#        Add MSG_FILTER
#     1997 May 30 (TimJ)
#	 Change default for POINT_LST to null
#     {enter_further_changes_here}

#-


      action change_pointing {

         helplib {$SURF_HELP}

         parameter change_point {
            type _LOGICAL
            prompt {Do you want to change the pointing correction data}
            helpkey *
          }

         parameter in {
            position 1
            type FILENAME
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <->GLOBAL.DATA_ARRAY
            prompt {Name of input file containing demodulated map data}
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter point_daz {
            type _REAL
            prompt {The azimuth pointing correction to be added (arcsec)}
            helpkey *
          }

         parameter point_del {
            type _REAL
            prompt {The elevation pointing correction to be added (arcsec)}
            helpkey *
          }

         parameter point_lst {
            type _CHAR
            prompt {The sidereal time of the pointing offset (hh mm ss.ss)}
            default !
            helpkey *
          }

      }

## CHANGE_QUALITY - Modify data quality.

#+
#  Name:
#     CHANGE_QUALITY.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
#        Original Version
#     1996 October (TIMJ)
#        Add GLOBAL associations
#     1996 November 1 (TIMJ)
#        Add header and HELPLIB
#     1997 March 19 (TIMJ)
#	 Separate from MODIFY
#     1997 March 31 (JFL)
#        Use just BAD_QUALITY and IN parameters
#     1997 April 30 (TIMJ)
#        Add MSG_FILTER
#     1997 May 21 (TIMJ)
#        Add USE_SECTION parameter
#     1997 May 29 (TIMJ)
#	 Add SECTION
#     1997 June 19 (TIMJ)
#        Remove USE_SECTION
#     {enter_further_changes_here}

#-


      action change_quality {

         helplib {$SURF_HELP}

         parameter bad_quality {
            position 2
            type _LOGICAL
            default TRUE
            ppath DEFAULT
            prompt {Set quality to bad? (No will set quality to good)}
            helpkey *
          }

         parameter in {
            position 1
            type _CHAR
            vpath PROMPT
            prompt {Data to be modified ndf{data-spec}}
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter section {
            type _CHAR
            access READ
            vpath PROMPT
            ppath Current
            prompt {Please enter a section (including {})}
            helpkey *
          }

      }

## DESPIKE - Despike data via 'regridding'

#+
#  Name:
#     DESPIKE.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (timj@jach.hawaii.edu)
#     {enter_new_authors_here}


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
# 	 Original version
#     1996 September (TIMJ)
#        Add SELECT_INTS
#     1996 October 29 (TIMJ)
#        Use GLOBAL defaults
#     1996 November 13 (TIMJ)
#        Add NA,AZ output coords
#     1997 January 9 (TIMJ)
#        Comment out defaults and in for REBIN_METHOD (using PAR_CHOIC)
#     1997 April 7 (TimJ)
#	 Change IN and REF to a CHAR
#        Add MSG_FILTER
#     1997 April 8 (TimJ)
#        Change USE_INTS to USE_SECTION
#	 Remove SELECT_INTS and INTEGRATIONS
#     1997 April 9 (TimJ)
#	 Add DUMMY to deal with GLOBAL defaults in REF
#     1997 April 21 (TimJ)
#        Add SFACTOR
#     1997 May 9 (TimJ)
#	 Add PL output coords
#     1997 May 9 (TimJ)
#	 Copy from REBIN.IFL
#        Add FILE. Remove regridding parameters.
#     1997 May 15 (TimJ)
#        Add LOOP parameter
#     1997 June 19 (TIMJ)
#        Remove USE_SECTION
#     1997 Spetember 4 (TIMJ)
#        Change message in DUMMY
#     1997 October 21 (TIMJ)
#        Convert to despike
#     1997 November 11 (TIMJ)
#        Add SMODE. Change default NSIGMA to 4.0
#     1997 November 27 (TIMJ)
#	 Remove LAT_OUT and LONG_OUT
#     1998 May 12 (TIMJ)
#        Add a parameter for writing MEDIAN image
#     1998 June 3 (TIMJ)
#        Add DEFOUT. Remove GRID parameter.
#     2005 March 22 (TIMJ):
#        Add CLEAR and STYLE parameters
#     {enter_further_changes_here}

#-

      action despike {

         helplib {$SURF_HELP}

         parameter clear {
            type _LOGICAL
            vpath DEFAULT
            ppath CURRENT DEFAULT
            prompt {Is the current picture to be cleared before plotting?}
            helpkey *
            default TRUE
          }

         parameter style {
            type LITERAL
            ppath CURRENT DEFAULT
            vpath CURRENT DEFAULT
            prompt {Style for graphics and formatted axis values}
            helpkey *
            default !
          }

         parameter ref {
                        # First reference date file
            position 1
            type _CHAR
            access READ
            ppath GLOBAL
            prompt {Name of first data file to be rebinned}
            helpkey *
          }

         parameter loop {
            type _LOGICAL
            prompt {Ask for multiple input files}
            default TRUE
            vpath default
            helpkey *
          }

         parameter in {
            type _CHAR
            access READ
            vpath PROMPT
            ppath DYNAMIC DEFAULT
            default !
            prompt {Name of next input file to be rebinned}
            helpkey *
          }

         parameter defout {
            type _LOGICAL
            vpath DEFAULT
            default FALSE
            prompt {Take default filename for output files}
          }

         parameter dummy {
# Allows me to read GLOBAL filename
            type NDF
            access READ
            vpath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            prompt {Please ignore (will only appear in prompt mode)}
          }

#      PARAMETER GRID
#         TYPE NDF
#         ACCESS 'WRITE'
#         DEFAULT !
#         PROMPT 'File containing the median data'
#      ENDPARAMETER

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter weight {
            type _REAL
            prompt {Weight to be assigned to input dataset}
            default 1.0
            helpkey *
          }

         parameter shift_dx {
            type _REAL
            prompt {X shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter shift_dy {
            type _REAL
            prompt {Y shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter out_coords {
            type _CHAR
            prompt {Coordinate sys for spike determination}
#	 IN      'RB','RJ','RD','GA', 'NA','AZ','PL'
            helpkey *
          }


         parameter out {
            type FILENAME
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            prompt {Name of despiked data file}
            helpkey *
          }


         parameter device {
                           # Graphics device
            ptype DEVICE
            vpath GLOBAL PROMPT
            ppath GLOBAL CURRENT
            association <-GLOBAL.GRAPHICS_DEVICE
            prompt {Name of graphics device}
            helpkey *
          }

         parameter xrange {
                           # Ordinate limits
            type _INTEGER
            prompt {X range of plot (! to continue)}
            vpath PROMPT
            ppath DYNAMIC
            helpkey *
          }

         parameter nsigma {
                           # N-sigma position
            type _REAL
            vpath PROMPT DEFAULT
            ppath CURRENT DEFAULT
            prompt {Sigma levels at which to despike}
            default 4.0
            helpkey *
          }

         parameter dmode {
            type _CHAR
            prompt {Display mode (Spiral, Xlinear, Ylinear, Diag1, Diag2)}
#	 IN      'SPIRAL','XLINEAR','YLINEAR','DIAG1','DIAG2'
            ppath Current Default
            helpkey *
          }

         parameter smode {
            type _CHAR
            prompt {Smoothing mode for clipping envelope (none,hann)}
            ppath Current Default
            helpkey *
          }

      }
## DESPIKE2 - Despike SCAN/MAP data.

#+
#  Name:
#     DESPIKE2.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1997 July 22 (JFL)
#        Original Version
#     {enter_further_changes_here}

#-


      action despike2 {

         helplib {$SURF_HELP}

         parameter nsigma {
            position 3
            prompt {Minimum nsigma of spikes from mean }
            type _REAL
            range 0 1000.0
            helpkey *
          }

         parameter in {
            position 1
            type FILENAME
            prompt {Name of input file containing demodulated data}
            vpath PROMPT
            ppath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter out {
            position 2
            type FILENAME
            prompt {Name of file to contain restored data}
            vpath PROMPT
            ppath GLOBAL
            association ->GLOBAL.DATA_ARRAY
            helpkey *
          }

      }
## EXTINCTION - Correct scuba data for extinction

#+
#  Name:
#     EXTINCTION.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
#        Original Version
#     1996 August (TIMJ)
#	Use PAR_CHOIC for sub_instrument
#     1996 October (TIMJ)
#        Add GLOBAL associations
#     1996 November 1 (TIMJ)
#        Add header and HELPLIB
#     1997 April 29 (TIMJ)
#        Add MSG_FILTER
#     {enter_further_changes_here}

#-


      action extinction {

         helplib {$SURF_HELP}

         parameter in {
            position 1
            prompt {Name of NDF containing demodulated data}
            type FILENAME
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            helpkey *
          }

         parameter sub_instrument {
            position 2
            prompt {Name of sub-instrument to be extinction corrected}
            type _CHAR
#	 IN       'LONG', 'SHORT', 'P2000', 'P1300', 'P1100'
            helpkey *
          }

         parameter first_tau {
            position 3
            prompt {First zenith sky opacity measured}
            type _REAL
            default 0.0
            helpkey *
          }

         parameter first_lst {
            position 4
            prompt {Sidereal time of first opacity measurement; hh mm ss.ss}
            type _CHAR
            default 0.0
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter second_tau {
            position 5
            prompt {Second zenith sky opacity measured}
            type _REAL
            ppath dynamic
            helpkey *
          }

         parameter second_lst {
            position 6
            prompt {Sidereal time of second opacity measurement; hh mm ss.ss}
            type _CHAR
            ppath dynamic
            helpkey *
          }

         parameter out {
            position 7
            prompt {Name of output NDF}
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            type FILENAME
            helpkey *
          }

      }
## EXTRACT_DATA - Write the X,Y and data to an ASCII file

#+
#  Name:
#     EXTRACT_DATA.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (timj@jach.hawaii.edu)
#     {enter_new_authors_here}


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
# 	 Original version
#     1996 September (TIMJ)
#        Add SELECT_INTS
#     1996 October 29 (TIMJ)
#        Use GLOBAL defaults
#     1996 November 13 (TIMJ)
#        Add NA,AZ output coords
#     1997 January 9 (TIMJ)
#        Comment out defaults and in for REBIN_METHOD (using PAR_CHOIC)
#     1997 April 7 (TimJ)
#	 Change IN and REF to a CHAR
#        Add MSG_FILTER
#     1997 April 8 (TimJ)
#        Change USE_INTS to USE_SECTION
#	 Remove SELECT_INTS and INTEGRATIONS
#     1997 April 9 (TimJ)
#	 Add DUMMY to deal with GLOBAL defaults in REF
#     1997 April 21 (TimJ)
#        Add SFACTOR
#     1997 May 9 (TimJ)
#	 Add PL output coords
#     1997 May 9 (TimJ)
#	 Copy from REBIN.IFL
#        Add FILE. Remove regridding parameters.
#     1997 May 15 (TimJ)
#        Add LOOP parameter
#     1997 June 19 (TIMJ)
#        Remove USE_SECTION
#     1997 Spetember 4 (TIMJ)
#        Change message in DUMMY
#     1998 Dec 8 (TIMJ)
#        Correct prompt for LONG_OUT
#     {enter_further_changes_here}

#-

      action extract_data {

         helplib {$SURF_HELP}

         parameter ref {
                        # First reference date file
            type _CHAR
            access READ
            ppath GLOBAL
            prompt {Name of first data file to be rebinned}
            helpkey *
          }

         parameter loop {
            type _LOGICAL
            prompt {Ask for multiple input files}
            default TRUE
            vpath default
            helpkey *
          }

         parameter in {
            type _CHAR
            access READ
            vpath PROMPT
            ppath DYNAMIC DEFAULT
            default !
            prompt {Name of next input file to be rebinned}
            helpkey *
          }

         parameter dummy {
# Allows me to read GLOBAL filename
            type NDF
            access READ
            vpath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            prompt {Please ignore (will only appear in prompt mode)}
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter weight {
            type _REAL
            prompt {Weight to be assigned to input dataset}
            default 1.0
            helpkey *
          }

         parameter shift_dx {
            type _REAL
            prompt {X shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter shift_dy {
            type _REAL
            prompt {Y shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter out_coords {
            type _CHAR
            prompt {Coordinate sys of output map; PL,AZ,NA,RB,RJ,RD or GA}
#	 IN      'RB','RJ','RD','GA', 'NA','AZ','PL'
            helpkey *
          }

         parameter long_out {
            type _CHAR
            prompt {Longitude of output map centre in hh (or dd) mm ss.ss format}
            helpkey *
          }

         parameter lat_out {
            type _CHAR
            prompt {Latitude of output map centre in dd mm ss.ss format}
            helpkey *
          }

         parameter file {
            type FILENAME
            prompt {Name of output ASCII file}
            helpkey *
          }

      }
## EXTRACT_FLAT - Extract the flatfield of a file to ascii file

#+
#  Name:
#     EXTRACT_FLAT.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1997 October 27 (TimJ)
#      Original version
#     {enter_further_changes_here}

#-

      action extract_flat {

         helplib {$SURF_HELP}


         parameter in {
            position 1
            prompt {Name of input file}
            type FILENAME
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter file {
            type FILENAME
            position 2
            prompt {Name of output ASCII file}
            helpkey *
          }

      }

## FLATFIELD - Divide data by SCUBA flatfield

#+
#  Name:
#     FLATFIELD.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
#        Original Version
#     1996 October (TIMJ)
#        Add GLOBAL associations
#     1996 November 1 (TIMJ)
#        Add header and HELPLIB
#     1997 April 29 (TIMJ)
#        Add MSG_FILTER
#     {enter_further_changes_here}

#-

      action flatfield {

         helplib {$SURF_HELP}


         parameter in {
            position 1
            prompt {Name of input file}
            type FILENAME
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter out {
            position 2
            prompt {Name of output file}
            type FILENAME
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            helpkey *
          }

      }

## INTREBIN - Rebin the SCUBA data onto a rectangular grid

#+
#  Name:
#     INTREBIN.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (timj@jach.hawaii.edu)
#     {enter_new_authors_here}


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
# 	 Original version
#     1996 September (TIMJ)
#        Add SELECT_INTS
#     1996 October 29 (TIMJ)
#        Use GLOBAL defaults
#     1996 November 13 (TIMJ)
#        Add NA,AZ output coords
#     1997 January 9 (TIMJ)
#        Comment out defaults and in for REBIN_METHOD (using PAR_CHOIC)
#     1997 April 8 (TimJ)
#        Copy from BOLREBIN
#        Change USE_INTS to USE_SECTION
#	 Remove SELECT_INTS and INTEGRATIONS
#     1997 April 9 (TimJ)
#	 Add DUMMY to deal with GLOBAL defaults in REF
#     1997 May 9 (TimJ)
#	 Add PL output coords
#     1997 May 21 (TimJ)
#        Add LOOP parameter
#     1997 June 19 (TIMJ)
#        Remove USE_SECTION
#     1997 September 4 (TIMJ)
#        Change message in DUMMY
#     1998 January 22 (TIMJ)
#        Add SIZE, WEIGHTS and TIMES
#     1998 Jun 9 (TIMJ)
#        Add WTFNRAD, SCALE. Position 1 for REF
#     1998 Dec 6 (TIMJ)
#        Add USEGRD
#     1998 Dec 8 (TIMJ)
#        Correct prompt for LONG_OUT
#     1998 Dec 10 (TIMJ)
#        Rename USEGRD to GUARD
#     {enter_further_changes_here}
#     1999 May 7 (TIMJ)
#        Add TRIM
#     1999 May 28
#        Add REFPIX
#     {enter_further_changes_here}
#-

      action intrebin {

         helplib {$SURF_HELP}

         parameter ref {
                        # First reference date file
            position 1
            type _CHAR
            access READ
            ppath GLOBAL
            prompt {Name of first data file to be rebinned}
            helpkey *
          }

         parameter loop {
            type _LOGICAL
            prompt {Ask for multiple input files}
            default TRUE
            vpath default
            helpkey *
          }

         parameter in {
            type _CHAR
            access READ
            vpath PROMPT
            ppath DYNAMIC DEFAULT
            default !
            prompt {Name of next input file to be rebinned}
            helpkey *
          }

         parameter dummy {
# Allows me to read GLOBAL filename
            type NDF
            access READ
            vpath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            prompt {Please ignore (will only appear in prompt mode)}
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter rebin_method {
            type _CHAR
            prompt {Rebinning method to be used}
#        DEFAULT 'LINEAR'
#	 IN      'BESSEL','LINEAR','SPLINE1','SPLINE2','SPLINE3'
            helpkey *
          }

         parameter wtfnrad {
            type _INTEGER
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            prompt {Radius of weighting function in scale lengths}
            helpkey *
          }

         parameter guard {
            type _LOGICAL
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            prompt {Use a guard ring?}
            helpkey *
          }

         parameter scale {
            type _REAL
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            helpkey *
          }


         parameter weight {
            type _REAL
            prompt {Weight to be assigned to input dataset}
            default 1.0
            helpkey *
          }

         parameter sfactor {
            type _REAL
            prompt {Smoothing factor for spline interpolation}
            helpkey *
          }

         parameter shift_dx {
            type _REAL
            prompt {X shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter shift_dy {
            type _REAL
            prompt {Y shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter out_object {
            type _CHAR
            prompt {Object name for output map}
            help "This name becomes the title of the output map"
            helpkey *
          }

         parameter out_coords {
            type _CHAR
            prompt {Coordinate sys of output map; PL,AZ,NA,RB,RJ,RD or GA}
#	 IN      'RB','RJ','RD','GA', 'NA','AZ','PL'
            helpkey *
          }

         parameter long_out {
            type _CHAR
            prompt {Longitude of output map centre in hh (or dd) mm ss.ss format}
            helpkey *
          }

         parameter lat_out {
            type _CHAR
            prompt {Latitude of output map centre in dd mm ss.ss format}
            helpkey *
          }

         parameter pixsize_out {
            type _REAL
            prompt {Size of pixels in output map (arcsec)}
            default 3.0
            range 0.01 60.0
            helpkey *
          }

         parameter out {
            type _CHAR
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            prompt {Name of container file to contain rebinned map}
            helpkey *
          }

         parameter weights {
            type _LOGICAL
            default FALSE
            prompt {Store the weights array}
            vpath DEFAULT
            helpkey *
          }

         parameter times {
            type _LOGICAL
            default FALSE
            prompt {Store the times array}
            vpath DEFAULT
            helpkey *
          }

         parameter size {
            type _INTEGER
            prompt {Number of pixels in output map (NX,NY)}
            helpkey *
          }

         parameter refpix {
            type _INTEGER
            prompt {Location of reference pixel in output map (X,Y)}
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            helpkey *
          }

         parameter trim {
            type _REAL
            prompt {Size of region to trim from map edge (arcsec)}
            vpath DEFAULT
            default 0.0
            helpkey *
          }

      }
## REBIN - Rebin the SCUBA data onto a rectangular grid

#+
#  Name:
#     REBIN.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (timj@jach.hawaii.edu)
#     {enter_new_authors_here}


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
# 	 Original version
#     1996 September (TIMJ)
#        Add SELECT_INTS
#     1996 October 29 (TIMJ)
#        Use GLOBAL defaults
#     1996 November 13 (TIMJ)
#        Add NA,AZ output coords
#     1997 January 9 (TIMJ)
#        Comment out defaults and in for REBIN_METHOD (using PAR_CHOIC)
#     1997 April 7 (TimJ)
#	 Change IN and REF to a CHAR
#        Add MSG_FILTER
#     1997 April 8 (TimJ)
#        Change USE_INTS to USE_SECTION
#	 Remove SELECT_INTS and INTEGRATIONS
#     1997 April 9 (TimJ)
#	 Add DUMMY to deal with GLOBAL defaults in REF
#     1997 April 21 (TimJ)
#        Add SFACTOR
#     1997 May 9 (TimJ)
#	 Add PL output coords
#     1997 May 15 (TimJ)
#        Add LOOP parameter
#     1997 June 19 (TIMJ)
#        Remove USE_SECTION
#     1997 September 4 (TIMJ)
#        Change message in DUMMY
#     1998 January 20 (TIMJ)
#        Add the SIZE parameter
#     1998 January 22 (TIMJ)
#        Add the WEIGHTS and TIMES parameters
#     1998 Jun 9 (TIMJ)
#        Add WTFNRAD, SCALE. Position 1 for REF
#     1998 Dec 6 (TIMJ)
#        Add USEGRD
#     1998 Dec 8 (TIMJ)
#        Correct prompt for LONG_OUT
#     1998 Dec 10 (TIMJ)
#        Rename USEGRD to GUARD
#     1999 May 7 (TIMJ)
#        Add TRIM
#     1999 May 28
#        Add REFPIX
#     {enter_further_changes_here}

#-

      action rebin {

         helplib {$SURF_HELP}

         parameter ref {
                        # First reference date file
            position 1
            type _CHAR
            access READ
            ppath GLOBAL
            prompt {Name of first data file to be rebinned}
            helpkey *
          }

         parameter loop {
            type _LOGICAL
            prompt {Ask for multiple input files}
            default TRUE
            vpath default
            helpkey *
          }

         parameter in {
            type _CHAR
            access READ
            vpath PROMPT
            ppath DYNAMIC DEFAULT
            default !
            prompt {Name of next input file to be rebinned}
            helpkey *
          }

         parameter dummy {
# Allows me to read GLOBAL filename
            type NDF
            access READ
            vpath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            prompt {Please ignore (will only appear in prompt mode)}
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }


         parameter rebin_method {
            type _CHAR
            prompt {Rebinning method to be used}
#        DEFAULT 'LINEAR'
#	 IN      'BESSEL','LINEAR'
            helpkey *
          }

         parameter scale {
            type _REAL
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            helpkey *
          }


         parameter weight {
            type _REAL
            prompt {Weight to be assigned to input dataset}
            default 1.0
            helpkey *
          }

         parameter wtfnrad {
            type _INTEGER
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            prompt {Radius of weighting function in scale lengths}
            helpkey *
          }

         parameter guard {
            type _LOGICAL
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            prompt {Use a guard ring?}
            helpkey *
          }


         parameter sfactor {
            type _REAL
            prompt {Smoothing factor for spline interpolation}
            helpkey *
          }

         parameter shift_dx {
            type _REAL
            prompt {X shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter shift_dy {
            type _REAL
            prompt {Y shift to be applied to input dataset on output map (arcsec)}
            default 0.0
            helpkey *
          }

         parameter size {
            type _INTEGER
            prompt {Number of pixels in output map (NX,NY)}
            helpkey *
          }

         parameter refpix {
            type _INTEGER
            prompt {Location of reference pixel in output map (X,Y)}
            vpath DYNAMIC PROMPT
            ppath DYNAMIC
            helpkey *
          }

         parameter out_object {
            type _CHAR
            prompt {Object name for output map}
            help "This name becomes the title of the output map"
            helpkey *
          }

         parameter out_coords {
            type _CHAR
            prompt {Coordinate sys of output map; PL,AZ,NA,RB,RJ,RD or GA}
#	 IN      'RB','RJ','RD','GA', 'NA','AZ','PL'
            helpkey *
          }

         parameter long_out {
            type _CHAR
            prompt {Longitude of output map centre in hh (or dd) mm ss.ss format}
            helpkey *
          }

         parameter lat_out {
            type _CHAR
            prompt {Latitude of output map centre in dd mm ss.ss format}
            helpkey *
          }

         parameter pixsize_out {
            type _REAL
            prompt {Size of pixels in output map (arcsec)}
            default 3.0
            range 0.01 60.0
            helpkey *
          }

         parameter out {
            type FILENAME
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            prompt {Name of file to contain rebinned map}
            helpkey *
          }

         parameter weights {
            type _LOGICAL
            default FALSE
            prompt {Store the weights array}
            vpath DEFAULT
            helpkey *
          }

         parameter times {
            type _LOGICAL
            default FALSE
            prompt {Store the times array}
            vpath DEFAULT
            helpkey *
          }

         parameter trim {
            type _REAL
            prompt {Size of region to trim from map edge (arcsec)}
            vpath DEFAULT
            default 0.0
            helpkey *
          }


      }
## REDUCE_SWITCH - Reduces the switches in a SCUBA observations

#+
#  Name:
#     REDUCE_SWITCH.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
#	 Original Version
#     1996 August (TIMJ)
#	 Add DESPIKE_LEVEL
#     1996 October (TIMJ)
#        Add GLOBAL associations
#     1996 November 1 (TIMJ)
#        Add header and HELPLIB
#     1997 April 11 (TIMJ)
#        Make 'NO' the default for REDUCE_SWITCH USE_CALIBRATOR
#     1997 April 23 (TIMJ)
#        Add ability to select a switch
#     1997 June 20 (TIMJ)
#        Use default value as VPATH in USE_CALIBRATOR and SPIKE_LEVEL
#     1998 January 15 (TIMJ)
#        Add T_HOT for skydips
#     2000 Apr 24 (TIMJ)
#        Add TARRAY parameter for skydips
#     {enter_further_changes_here}

#-

      action reduce_switch {

         helplib {$SURF_HELP}

         parameter in {
            position 1
            type _CHAR
            prompt {Name of input file containing demodulated data}
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter use_calibrator {
            type _LOGICAL
            default FALSE
            vpath DEFAULT
            prompt {Should the data be divided by the internal calibrator}
            helpkey *
          }

         parameter spike_level {
            type _INTEGER
            default 5
            vpath DEFAULT
            prompt {De-spike level}
            helpkey *
          }

         parameter switch {
            type _INTEGER
            default 0
            prompt {Which switch (0=reduce;1,2,3=switch number)}
            vpath DEFAULT
            ppath DEFAULT
            helpkey *
          }

         parameter tarray {
            type _LOGICAL
            default FALSE
            vpath DEFAULT
            prompt {Read the cold load temperatures as an array}
            helpkey *
          }

         parameter t_cold {
            prompt {Temperature of cold load}
            type _REAL
            range 1 300
            helpkey *
          }

         parameter t_hot {
            prompt {Temperature of hot load}
            type _REAL
            range 1 350
            vpath DEFAULT
            helpkey *
          }

         parameter out {
            position 2
            type NDF
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            prompt {Name of output file to contain reduced switch data}
            helpkey *
          }

      }
## REMSKY - Remove sky noise and constant offset from data

#+
#  Name:
#     REMSKY.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1996 November 17 (TIMJ)
#        Original Version
#     1996 November 22 (TIMJ)
#        Added ITER_SIGMA and remove DROP
#     1997 April 29 (TIMJ)
#        Add MSG_FILTER
#     1997 June 12 (TimJ)
#        Change name of CLIP to DESPIKE
#     1997 October 16 (TimJ)
#        Remove the despiking parameters
#     1997 November (TimJ)
#        Add the ADD parameter.
#     {enter_further_changes_here}
#-


      action remsky {

         helplib {$SURF_HELP}

         parameter add {
            type _LOGICAL
            prompt {Add the mean sky level back onto the data}
            vpath DYNAMIC
            helpkey *
          }


         parameter bolometers {
            type _CHAR
            prompt {The Sky bolometers, [a1,a2] for an array}
            ppath CURRENT
            helpkey *
          }

         parameter in {
            position 1
            type FILENAME
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            prompt {Name of input file containing demodulated map data}
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter iter_sigma {
            type _REAL
            prompt {Sigma level to drop points from mean iteratively}
            default -1.
            helpkey *
          }

         parameter mode {
            type _CHAR
            prompt {Sky removal mode}
            ppath Current Default
            helpkey *
          }

         parameter out {
            position 2
            prompt {Name of output file}
            type FILENAME
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            helpkey *
          }


      }

## RESTORE - Remove dual beam response for SCAN/MAP data

#+
#  Name:
#     RESTORE.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
#        Original Version
#     1997 April (TIMJ)
#        Add header and HELPLIB and CHOP and defaults
#     1997 April 29 (TIMJ)
#        Add GLOBAL association to 'IN' and MSG_FILTER
#     {enter_further_changes_here}

#-


      action restore {

         helplib {$SURF_HELP}

         parameter chop {
            position 3
            prompt {Size of chop}
            type _REAL
            range 0 360
            helpkey *
          }

         parameter in {
            position 1
            type FILENAME
            prompt {Name of input file containing demodulated data}
            vpath PROMPT
            ppath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter out {
            position 2
            type FILENAME
            prompt {Name of file to contain restored data}
            vpath PROMPT
            ppath GLOBAL
            association ->GLOBAL.DATA_ARRAY
            helpkey *
          }

      }
## SCUCAT - Concatenate photometry data

#+
#  Name:
#     SCUCAT.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     TIMJ: Tim Jenness (timj@jach.hawaii.edu)
#     {enter_new_authors_here}


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1997 April 29 (TIMJ)
#        Add MSG_FILTER
#     1997 June 10 (TimJ)
#        Add LOOP
#     1997 June 11 (TimJ)
#        Add BOL
#     1997 Spetember 4 (TIMJ)
#        Change message in DUMMY
#     1998 April 22 (TIMJ)
#        Add METHOD
#-

      action scucat {

         helplib {$SURF_HELP}

         parameter bol {
            type _CHAR
            access READ
            vpath PROMPT
            ppath CURRENT
            helpkey *
            prompt {Name of bolometer associated with this data}
          }

         parameter out {
            position 1
            type _CHAR
            access WRITE
            vpath PROMPT
            prompt {Rootname of files to contain concatenated data}
            helpkey *
          }

         parameter dummy {
# Allows me to read GLOBAL filename
            type NDF
            access READ
            vpath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            prompt {Please ignore (will only appear in prompt mode)}
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter method {
            type _CHAR
            prompt {Concatenation method}
            helpkey *
          }

         parameter in {
            type _CHAR
            access READ
            vpath PROMPT
            ppath DYNAMIC DEFAULT
            default !
            position 2
            prompt {Name of input file containing photometry data}
            helpkey *
          }

         parameter loop {
            type _LOGICAL
            prompt {Ask for multiple input files}
            default TRUE
            vpath default
            helpkey *
          }


      }
## SCAN_RLB - Remove linear baseline from SCAN/MAP data

#+
#  Name:
#     SCAN_RLB.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
#        Original Version
#     1997 April (TIMJ)
#        Add header and HELPLIB and CHOP and defaults
#     1997 April 29 (TIMJ)
#        Add GLOBAL association to 'IN' and MSG_FILTER
#     1997 May 22 (TIMJ)
#        Copy from RESTORE.IFL
#     1997 December 31 (TIMJ)
#        Add RLB parameter
#     1998 April 7 (TIMJ)
#        Add METHOD. Change max size of CHOP to 600. RLB defaults to TRUE
#     1999 May 24 (TIMJ)
#        Add SECTION
#     {enter_further_changes_here}


#-


      action scan_rlb {

         helplib {$SURF_HELP}

         parameter chop {
            position 3
            prompt {Size of chop}
            type _REAL
            range 0 600
            helpkey *
          }

         parameter in {
            position 1
            type FILENAME
            prompt {Name of input file containing demodulated data}
            vpath PROMPT
            ppath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            helpkey *
          }

         parameter method {
            type _CHAR
            prompt {Method to use for baseline removal}
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter out {
            position 2
            type FILENAME
            prompt {Name of file to contain restored data}
            vpath PROMPT
            ppath GLOBAL
            association ->GLOBAL.DATA_ARRAY
            helpkey *
          }

         parameter rlb {
            prompt {Remove fitted baseline from output data}
            type _LOGICAL
            default TRUE
            ppath CURRENT DEFAULT
            helpkey *
          }

         parameter section {
            type _CHAR
            access READ
            vpath PROMPT
            ppath Current
            prompt {Please enter a section (including {})}
            helpkey *
          }

      }
## SCUCLIP - Simple despiking

#+
#  Name:
#     SCUCLIP.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1996 November 17 (TIMJ)
#        Original Version
#     1996 November 22 (TIMJ)
#        Added ITER_SIGMA and remove DROP
#     1997 April 29 (TIMJ)
#        Add MSG_FILTER
#     1997 June 12 (TimJ)
#        Change name of CLIP to DESPIKE
#     1997 October 16 (TimJ)
#        Rename to SCUCLIP
#     {enter_further_changes_here}
#-


      action scuclip {

         helplib {$SURF_HELP}

         parameter in {
            position 1
            type FILENAME
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            prompt {Name of input file containing demodulated map data}
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter nsigma {
            position 3
            type _DOUBLE
            prompt {How many sigma to despike bolometers}
            default 5.0
            helpkey *
          }


         parameter out {
            position 2
            prompt {Name of output file}
            type FILENAME
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            helpkey *
          }


      }

## SCUHELP - Gives help about KAPPA.

#+
#  Name:
#     SCUHELP.IFL

#  Type of module:
#     ADAM A-task parameter interface.

#  Authors:
#     MJC: Malcolm J. Currie (STARLINK)
#     TIMJ: Tim Jenness (JAC)
#     {enter_new_authors_here}


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1986 November 14 (MJC):
#	 Original version.
#     1992 August 19 (MJC):
#     	 Added prologue, and access to help library.
#     1997 (TIMJ)
#        Rename as scuhelp and include in SURF.
#     {enter_further_changes_here}

#-


      action scuhelp {

         helplib {$SURF_HELP}

         parameter topic {
            position 1
            type LITERAL
            access READ
            vpath DEFAULT
            prompt {Help topic}
            default {         }
            helpkey *
          }

         parameter subtopic {
            position 2
            type LITERAL
            access READ
            vpath DEFAULT
            prompt {Help subtopic}
            default {         }
            helpkey *
          }

         parameter subsubtopic {
            position 3
            type LITERAL
            access READ
            vpath DEFAULT
            prompt {Help subsubtopic}
            default {         }
            helpkey *
          }

         parameter subsubsubtopic {
            position 4
            type LITERAL
            access READ
            vpath DEFAULT
            prompt {Help subsubsubtopic}
            default {         }
            helpkey *
          }

      }

## SCUOVER - Overlay the SCUBA array onto a rebinned image

#+
#  Name:
#     SCUOVER.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     TIMJ: Tim Jenness (timj@jach.hawaii.edu)
#     {enter_new_authors_here}


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1996 December 17 (TIMJ)
#	 Original version
#     1997 May 8 (TIMJ)
#	 Specify INT,MEAS and EXP for overlay
#	Add MSG_FILTER
#     1997 May 30 (TimJ)
#       Turn of prompting of EXT, INT, MEAS, EXP.
#	Only use if asked for to reduce prompting.
#     2000 Jun 1 (TimJ)
#       Add STYLE

#-

      action scuover {

         helplib {$SURF_HELP}

         parameter device {
                           # Graphics device
            ptype DEVICE
            vpath GLOBAL PROMPT
            ppath GLOBAL CURRENT
            association <-GLOBAL.GRAPHICS_DEVICE
            prompt {Name of graphics device}
            helpkey *
          }

         parameter exposure {
            type _INTEGER
            prompt {Exposure number}
            vpath DYNAMIC { PROMPT}
            ppath DYNAMIC
            helpkey *
          }


         parameter ext {
                        # Source of bolometer coordinates
            type NDF
            access READ
            prompt {Name of (extinction corrected) demodulated data file}
            vpath DYNAMIC
            helpkey *
          }

         parameter integration {
            type _INTEGER
            prompt {Integration number}
            vpath DYNAMIC { DEFAULT} { PROMPT}
            ppath DEFAULT
            helpkey *
          }

         parameter measurement {
            type _INTEGER
            prompt {Measurement number}
            vpath DYNAMIC { DEFAULT} { PROMPT}
            ppath DEFAULT
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }


         parameter ndf {
                        # Input NDF to be analysed
            position 1
            type NDF
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <->GLOBAL.DATA_ARRAY
            prompt {Image to display bolometers over}
            helpkey *
          }

         parameter name {
                         # Write name or number of bolometer
            type _LOGICAL
            prompt {Display bolometer name (else number)?}
            vpath CURRENT DEFAULT
            ppath CURRENT
            default TRUE
            helpkey *
          }

         parameter style {
            type LITERAL
            vpath CURRENT DEFAULT
            prompt {Plotting style for the annotated axes}
            ppath CURRENT DEFAULT
            default !
            helpkey *
          }



      }




## SCUPHOT - Process photometry observations.

#+
#  Name:
#     SCUPHOT.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     JFL:  John Lightfoot (ROE)
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1995 (JFL)
#        Original Version
#     1996 August (TIMJ)
#       Use PAR_CHOIC for sub_instrument
#     1996 October (TIMJ)
#        Add GLOBAL associations
#     1996 November 1 (TIMJ)
#        Add header and HELPLIB
#     1997 April 29 (TIMJ)
#        Add MSG_FILTER
#     1997 May 21 (TimJ)
#	 Add ALLBOLS parameter
#     1997 May 22 (TimJ)
#	 Make '!' the default for FILE
#     1997 June 10 (TimJ)
#        Change FILE to _CHAR instead of type FILENAME
#        Fixes problems with uninitialised parameter.
#     1998 June 16 (TimJ)
#        Add POSITION for OUT
#     {enter_further_changes_here}

#-

      action scuphot {

         helplib {$SURF_HELP}

         parameter in {
            position 1
            type FILENAME
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            prompt {Name of input file containing demodulated data}
            helpkey *
          }

         parameter analysis {
            position 2
            type _CHAR
            default AVERAGE
            prompt {Which reduction method}
#         IN       'AVERAGE', 'PARABOLA'
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter out {
            position 3
            type _CHAR
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            prompt {Name of container file to hold map and time-sequence data}
            helpkey *
          }

         parameter file {
            position 4
            type _CHAR
            vpath PROMPT
            prompt {Name of ASCII file to contain results summary}
            default !
            ppath DEFAULT
            helpkey *
          }

         parameter allbols {
            type _LOGICAL
            prompt {Select all bolometers}
            default FALSE
            vpath Default
            helpkey *
          }

      }
## SKYDIP - Process skydip data

#+
#  Name:
#     SKYDIP.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     TIMJ: Tim Jenness (timj@jach.hawaii.edu)
#     {enter_new_authors_here}


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1996 (TIMJ)
#        Original version
#     1997 March 26 (TIMJ)
#	 OUT is now CHAR instead of NDF
#        Add HELP
#     1997 June 12 (TimJ)
#        Add MSG_FILTER
#     1997 July 18 (TimJ)
#        Change IN to be _CHAR
#     1997 Nov 21 (TimJ)
#        Fix prompt string for 'IN' so that it no longer asks for an
#	 extinction correction.
#     1998 Jan 6 (TimJ)
#        Add the CVAR variable.
#     1998 Jan 12 (TimJ)
#        Add the FIT parameters
#     1998 Jan 15 (TimJ)
#        Add T_HOT
#     1998 Jun 5  (TimJ)
#        Add ERRORS
#     2000 Apr 17 (TimJ)
#        Add RESIDUAL
#-

      action skydip {

         helplib {$SURF_HELP}

         parameter b_fit {
            prompt {Fitted value of B}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter b_err {
            prompt {Error in fitted value of B}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter b_val {
            position 5
            prompt {B parameter}
            type _REAL
            default -1.0
            range -1000000 1.0
            helpkey *
          }

         parameter cvar {
            prompt {Use the same variance for each point}
            type _LOGICAL
            default FALSE
            helpkey *
            vpath CURRENT DEFAULT
            ppath CURRENT DEFAULT
          }

         parameter eta_tel {
            position 4
            prompt {Telescope efficiency}
            type _REAL
            default -1.0
            range -1000000 1.0
            helpkey *
          }

         parameter eta_tel_err {
            prompt {Error in fitted value of ETA_TEL}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }


         parameter eta_tel_fit {
            prompt {Fitted value of Eta_Tel}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter goodfit {
            prompt {Was the fit good}
            type _LOGICAL
            default FALSE
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter in {
            position 1
            type _CHAR
            prompt {Name of input file containing demodulated data}
            helpkey *
          }

         parameter model_out {
            position 7
            prompt {Name of output NDF for MODEL data}
            type _CHAR
            association ->GLOBAL.DATA_ARRAY
            default !
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter residual {
            prompt {Residual of fit}
            type _DOUBLE
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter sigma {
            prompt {Standard deviation of residuals}
            type _DOUBLE
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter sub_instrument {
            position 2
            prompt {Name of sub-instrument to be analysed}
            type _CHAR
#         IN       'LONG', 'SHORT', 'P2000', 'P1300', 'P1100'
            helpkey *
          }

         parameter out {
            position 6
            prompt {Name of output NDF for measured data}
            type _CHAR
            default !
            helpkey *
          }

         parameter tauz_err {
            prompt {Error in fitted sky opacity}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }


         parameter tauz_fit {
            prompt {Fitted sky opacity}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter t_cold {
            position 3
            prompt {Temperature of cold load}
            type _REAL
            range 1 300
            helpkey *
          }

         parameter t_hot {
            prompt {Temperature of hot load (K)}
            type _REAL
            range 1 350
            vpath DEFAULT
            helpkey *
          }

         parameter wavelength {
            prompt {Selected wavelength of fit}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter xisq {
            prompt {Reduced chi square of fit}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }


      }
## SKYDIP2 - Process pre-processed skydip data

      action skydip2 {

         helplib {$SURF_HELP}

         parameter b_fit {
            prompt {Fitted value of B}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter b_err {
            prompt {Error in fitted value of B}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter b_val {
            position 2
            prompt {B parameter}
            type _REAL
            default -1.0
            range -1000000 1.0
            helpkey *
          }

         parameter cvar {
            prompt {Use the same variance for each point}
            type _LOGICAL
            default FALSE
            helpkey *
            vpath CURRENT DEFAULT
            ppath CURRENT DEFAULT
          }

         parameter eta_tel {
            position 3
            prompt {Telescope efficiency}
            type _REAL
            default -1.0
            range -1000000 1.0
            helpkey *
          }

         parameter eta_tel_err {
            prompt {Error in fitted value of ETA_TEL}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter eta_tel_fit {
            prompt {Fitted value of Eta_Tel}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter goodfit {
            prompt {Was the fit good}
            type _LOGICAL
            default FALSE
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter in {
            position 1
            type _CHAR
            prompt {Name of input file containing sky temperature data}
            helpkey *
          }

         parameter out {
            position 4
            prompt {Name of output NDF for MODEL data}
            type _CHAR
            association ->GLOBAL.DATA_ARRAY
            default !
            helpkey *
          }

         parameter residual {
            prompt {Residual of fit}
            type _DOUBLE
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter sigma {
            prompt {Standard deviation of residuals}
            type _DOUBLE
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter tauz_err {
            prompt {Error in fitted sky opacity}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }


         parameter tauz_fit {
            prompt {Fitted sky opacity}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter wavelength {
            prompt {Selected wavelength of fit}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter xisq {
            prompt {Reduced chi square of fit}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }


      }
## SCUBA2MEM - Write out position information for SCUBA DBMEM

#+
#  Name:
#      SCUBA2MEM.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1998 Jan 8 (TIMJ)
#        Original Version
#     1999 Jul 13 (TIMJ)
#        Add LONG, LAT
#     {enter_further_changes_here}

#-

      action scuba2mem {

         helplib {$SURF_HELP}

         parameter in {
            position 1
            type _CHAR
            prompt {Name of input file containing demodulated data}
            vpath PROMPT
            ppath CURRENT
            helpkey *
          }

         parameter long {
            type _CHAR
            prompt {Longitude of output map centre in hh (or dd) mm ss.ss format}
            helpkey *
          }

         parameter lat {
            type _CHAR
            prompt {Latitude of output map centre in dd mm ss.ss format}
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter nbeams {
            type _INTEGER
            prompt {Required number of beams}
            default 3
            vpath PROMPT
            ppath CURRENT DEFAULT
            helpkey *
          }

         parameter out {
            position 2
            type FILENAME
            prompt {Name of file to contain bolometer positions}
            vpath PROMPT
            ppath GLOBAL
            association ->GLOBAL.DATA_ARRAY
            helpkey *
          }

         parameter out_coords {
            type _CHAR
            prompt {Coordinate sys of output map; PL,AZ,NA,RB,RJ,RD or GA}
#        IN      'RB','RJ','RD','GA', 'NA','AZ','PL'
            helpkey *
          }

         parameter shift {
            type _REAL
            prompt {Tangent plane shifts (arcsec) [x,y]}
            ppath DYNAMIC DEFAULT
            vpath PROMPT
            helpkey *
          }

      }
## SCUMAKEWT - Make FT weights for REMDBM

#+
#  Name:
#     SCUMAKEWT

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#   Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#    24-May-1999 (TIMJ)
#      Add LIKE parameter and output parameters
#     {enter_further_changes_here}

#-

      action scumakewt {

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter chop {
            type _REAL
            position 1
            ppath Current
            prompt {Chop throw in arcsec}
          }

         parameter pa {
            position 2
            type _REAL
            ppath Current
            prompt {Chop position angle (degrees)}
          }


         parameter like {
            type NDF
            prompt {Template NDF}
            default !
            vpath DEFAULT
            helpkey *
          }


         parameter pixsize {
            type _REAL
            position 3
            ppath Current
            prompt {Pixel size in arcsec}
          }

         parameter size {
            position 4
            type _INTEGER
            ppath Current
            prompt {Dimension of each axis}
          }

         parameter ftchop {
            type NDF
            position 5
            access WRITE
            vpath PROMPT
            ppath Current
            association ->GLOBAL.DATA_ARRAY
            prompt {Name of file to contain deconvolution multiplier}
            helpkey *
          }

         parameter wtchop {
            type NDF
            position 6
            access WRITE
            ppath Current
            vpath PROMPT
            prompt {Name of file to contain deconvolution weight}
            helpkey *
          }

         parameter outchop {
            prompt {Actual chop throw used}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter outpa {
            prompt {Actual chop position angle used}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter outpixsz {
            prompt {Actual pixel size used}
            type _REAL
            default -1.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

      }
## REDUCE_NOISE - Process noise observations

#+
#  Name:
#     SCUPHOT.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     1998 Nov 18 (TIMJ)
#        Original Version

#-

      action reduce_noise {

         helplib {$SURF_HELP}

         parameter in {
            position 1
            type FILENAME
            access READ
            vpath PROMPT
            prompt {Name of input file containing demodulated data}
            helpkey *
          }


         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter out {
            position 2
            type _CHAR
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            prompt {Name of container file to hold map and time-sequence data}
            helpkey *
          }

         parameter file {
            position 3
            type _CHAR
            vpath PROMPT
            prompt {Name of ASCII file to contain results summary}
            ppath DYNAMIC
            helpkey *
          }

      }
## ADD_DBM - Create dual beam image from single beam input

#+
#  Name:
#     ADD_DBM

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     13-JUL-1999 (TIMJ)
#       Add NBEAMS
#     {enter_further_changes_here}

#-

      action add_dbm {

         helplib {$SURF_HELP}

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter chop {
            type _REAL
            position 2
            ppath Current
            prompt {Chop throw in pixels}
          }

         parameter pa {
            position 3
            type _REAL
            ppath Current
            prompt {Chop position angle (degrees)}
          }

         parameter nbeams {
            position 5
            type _INTEGER
            ppath Current
            prompt {Number of chopped beams (2 or 3)}
          }

         parameter in {
            type NDF
            position 1
            access READ
            vpath PROMPT
            ppath Current
            prompt {Single-beam input image}
          }

         parameter out {
            type NDF
            position 4
            access WRITE
            vpath PROMPT

            association ->GLOBAL.DATA_ARRAY
            prompt {Name of file to contain dual beam image}
            helpkey *
          }

         parameter pixsize {
            type _REAL
            position 6
            ppath Current
            prompt {Pixel size in arcsec}
          }


      }

## REMIP - remove instrumental polarisation from data file

#+
#  Name:
#     REMIP

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 1995,1996,1997,1998,1999 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     {enter_further_changes_here}

#-

      action remip {

         helplib {$SURF_HELP}

         parameter in {
            position 1
            type FILENAME
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <->GLOBAL.DATA_ARRAY
            prompt {Name of input file containing demodulated map data}
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter out {
            position 3
            prompt {Name of output file}
            type FILENAME
            access WRITE
            vpath PROMPT
            association ->GLOBAL.DATA_ARRAY
            helpkey *
          }

         parameter ipfile {
            position 2
            type _CHAR
            prompt {The name of the file containing the IP data}
            default Dynamic
            helpkey *
          }


      }
## SCUCLKERR - Determine clock error

#+
#  Name:
#     SCUCLKERR.IFL

#  Type of Module:
#     ADAM A-task parameter interface.

#  Authors:
#     TIMJ: Tim Jenness (JACH)


#  Copyright:
#     Copyright (C) 2000 Particle Physics and Astronomy
#     Research Council. All Rights Reserved.

#  History:
#     2000 Jun 8
#        Original Version
#     {enter_further_changes_here}

#-

      action scuclkerr {

         helplib {$SURF_HELP}


         parameter in {
            position 1
            prompt {Name of input file}
            type FILENAME
            access READ
            vpath PROMPT
            ppath GLOBAL
            association <-GLOBAL.DATA_ARRAY
            helpkey *
          }

         parameter msg_filter {
            type _CHAR
            prompt {Messaging level}
            default !
            vpath DEFAULT
            helpkey *
          }

         parameter clockerr {
            prompt {Error in clock}
            type _REAL
            default -999.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter dr {
            prompt {Error in positions at edge of array due to clock error}
            type _REAL
            default -999.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter dang {
            prompt {Error in rotation angle}
            type _REAL
            default -999.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter lag {
            prompt {Lag between starting obs and taking data}
            type _REAL
            default -999.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }

         parameter mjd {
            prompt {Corrected Modified Julian date of start of observation}
            type _DOUBLE
            default -999.0
            helpkey *
            vpath DEFAULT
            access WRITE
          }


      }

   }

   command change_nacentre {
      obey {starperl ${SURF_DIR}/change_nacentre.pl}
   }

   command mapsum {
      obey {starperl ${SURF_DIR}/mapsum}
   }

   command sculog {
      obey {starperl ${SURF_DIR}/sculog}
   }

   command scuquick {
      obey {starperl ${SURF_DIR}/scuquick}
   }

   command photsum {
      obey {starperl ${SURF_DIR}/photsum}
   }

   command pointsum {
      obey {starperl ${SURF_DIR}/pointsum}
   }

   command remdbm {
      obey {starperl ${SURF_DIR}/remdbm.pl}
   }

   command scushift {
      obey {starperl -s ${SURF_DIR}/scushift}
   }

   command scunoise {
      obey {starperl -s ${SURF_DIR}/scunoise}
   }

   command setbolwt {
      obey {starperl ${SURF_DIR}/setbolwt.pl}
   }

   command skysum {
      obey {starperl ${SURF_DIR}/skysum}
   }

   command obssum {
      obey {starperl ${SURF_DIR}/sculog -summary}
   }

   command qdraw {
      obey {starperl ${SURF_DIR}/qdraw}
   }

   command sigclip {
      obey {starperl ${SURF_DIR}/sigclip}
   }


   command scupa {
      obey {$SURF_DIR/scupa.csh}
   }

   command sdip {
      obey {$SURF_DIR/sdip.csh}
   }

   command sdip2 {
      obey {$SURF_DIR/sdip2.csh}
   }

   command dspbol {
      obey {$SURF_DIR/dspbol}
   }

   command pltbol {
      obey {$SURF_DIR/pltbol}
   }

   command rlinplot {
      obey {$SURF_DIR/rlinplot}
   }

   command scuplot {
      obey {$SURF_DIR/scuplot.csh}
   }

   command scusetenv {
      obey {source $SURF_DIR/scusetenv.csh}
   }

   icl {defhelp surf $SURF_HELP 0}

   display {

     SURF - SCUBA User Reduction Facility
     Commands are now available -- (Version @PACKAGE_VERSION@)

     Type scuhelp for help on SURF commands.
     Type "showme sun216" to browse the hypertext documentation.

   }

}
