# E.S.O. - VLT project/ESO Archive
# "@(#) $Id: Makefile.in,v 1.3 1997/12/02 23:25:26 abrighto Exp $"
#
# Makefile.in
#
# This file is processed by configure to produce the actual Makefile.
#
# who             when       what
# --------------  ---------  ---------------------------------------------
# Allan Brighton  08 Mar 96  Created
# ------------------------------------------------------------------------

CC           	= @CC@
CXX           	= @CXX@
CFLAGS  	= @CXXDEBUGFLAGS@
TOPDIR      	= @DESTDIR@
LIBDIR      	= @LIBDIR@
DEPEND_TARGET	= @DEPEND_TARGET@

SRCS 		=  tMem.C tHTTP.C tShellCommand.C

OBJS 		=  tMem.o tHTTP.o tShellCommand.o

PROGS 		=  tMem tHTTP tShellCommand

INCLUDES	= -I../include 

CC_SWITCHES	= $(CFLAGS) $(DEFINES) $(INCLUDES)

LIBRARIES       = ../lib/libutil.a

DEPEND_FLAGS    = $(CC_SWITCHES) @CXX_INCLUDE@ @CXX_DEPEND_FLAGS@
SHELL    	= /bin/sh
AR       	= ar rc
RM       	= rm -f
EXTRA_LIBS      = @LIBS@

all: 

test: $(PROGS)

lib:
	@cd ../src; $(MAKE)

All:
	cd ../..; $(MAKE); $(MAKE)

install:

clean: 
	$(RM) $(PROGS) $(OBJS) XYZZY *.tmp *.result *\~ "#"* *.o

distclean: clean
	echo > make.dep
	rm -f Makefile	

# accept all test results
allok:
	for i in *.result; do cp $$i `basename $$i .result`.ok; done

tMem: tMem.o $(LIBRARIES) FORCE
	$(CXX) $(CC_SWITCHES) -o $@ $@.o $(LIBRARIES) $(EXTRA_LIBS)	
	-$@ > $@.result 2>&1
	-@if cmp $@.result $@.ok; \
	 then echo "$@: PASSED" ; \
	 else echo "*** $@: TEST FAILED: see $@.result"; \
	 fi

tHTTP: tHTTP.o $(LIBRARIES) FORCE
	$(CXX) $(CC_SWITCHES) -o $@ $@.o $(LIBRARIES) $(EXTRA_LIBS)	
	-$@ > $@.result 2>&1
	-@if cmp $@.result $@.ok; \
	 then echo "$@: PASSED" ; \
	 else echo "*** $@: TEST FAILED: see $@.result"; \
	 fi

tShellCommand: tShellCommand.o $(LIBRARIES) FORCE
	$(CXX) $(CC_SWITCHES) -o $@ $@.o $(LIBRARIES) $(EXTRA_LIBS)	
	-$@ > $@.result 2>&1
	-@if cmp $@.result $@.ok; \
	 then echo "$@: PASSED" ; \
	 else echo "*** $@: TEST FAILED: see $@.result"; \
	 fi

.SUFFIXES: .C
.c.o:
	$(CC) -c $(CC_SWITCHES) $<

.C.o:
	$(CXX) -c $(CC_SWITCHES) $<

man:

FORCE:

include ../../depend.mk
