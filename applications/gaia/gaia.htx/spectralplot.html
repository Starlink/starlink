<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Spectral plot window</title>
  </head>

  <body>
    <h2 align=center><font color=red>Spectral plot window</font></h2>

    <p align="center">
      <img src="spectralplot.gif"/>
    </p>
    <p>
      This window displays a line plot (a spectrum) made from the pixel values
      along the hidden dimension of a cube. You have usually created it by
      opening a cube and then clicking on a pixel from the displayed image
      slice. It can be updated by clicking on another pixel (each click
      auto-scales the display values) or continuously updated by clicking and
      then dragging over the image, while holding the mouse button down.
    </p>
    <p>
      Two spectra can be displayed at the same time by defining a
      <tt>reference spectrum</tt> (see the <tt>Spectrum</tt> tab in the cube
      handling toolbox). Note that the reference spectrum is not considered
      when autoscaling the plot limits.
    </p>
    <p>
      To get the data range updated continuously (which will be much slower)
      you can select the <tt>Autoscale</tt> item in the <tt>Options</tt>
      menu. If you want to zoom on a region you can currently only do this
      using the collapse limits in the cube toolbox. Set these to the pixel
      ranges required, click on the image and only spectral values from that
      range will be displayed (both these arrangements may change in the next
      release).
    </p>
    <p>
      When looking at a spectrum the position of the current slice in the cube
      is shown by a vertical line (red by default). This will updated as you
      move through the cube slice-by-slice (the position of the spectrum on
      the image is shown by a cross). You can also move through slices by
      dragging this line around, other reference ranges created by the cube
      toolbox can also be dragged around.
    <p>
    <p>
      You are free to close this window at any time as it will be reopened (if
      you click on the image) if the cube toolbox is active. It can also (like
      all GAIA windows) be resized.
    </p>

    <h3>The Coords menu</h3>
    <p>
      For cube coordinate systems that define a spectral axis, you can also
      choose to transform into other supported coordinate systems. These are
      listed in the <tt>Coords</tt> menu (currently: angstroms, nm, mm,
      micrometres, GHz, MHz, THz, KHz, J, ergs, eV, keV and 1/m, plus m/s and
      km/s (radio), if a rest frequency is defined). Just choose one and the
      plot and slice coordinates will be redisplayed to show your new
      coordinates. This menu is replicated in the cube toolbox plot for
      convenience. To return to the initial system just choose the
      <tt>Default</tt> item.
    </p>
    <p>
      When your data do not describe a spectral axis the non-time related
      items in the <tt>Coords</tt> menu will be greyed out.
    </p>
    <p>
      If your cube has a time axis (e.g. raw data cubes from the JCMT) then
      you can use the other items in the <tt>Coords</tt> menu to choose
      different time-scales - TAI, UTC, UT1, GMST, LAST, LMST, TT, TDB, TCB,
      TCG or local time are supported. You can also display time as an offset
      in seconds from the first observation by selecting <tt>Offset Time</tt>.
    </p>


    <h3>The Options menu</h3>
    <p>
      There are various items available in this menu that mostly effect the
      presentation of the spectrum and whether error bars are displayed.
      <tt>Autoscale</tt> is described above, the log options should be obvious
      (but see the gotcha below) as should the various presentational ones
      (which are useful when creating hardcopies). Note that the options to do
      with displaying error bars, colours, the line width and the axes font
      are retained between sessions. To get back to the defaults selected the
      <tt>Reset</tt> item.
    </p>
    <p>
      When error bars are displayed (this requires that the cube is an NDF and
      has a variance component) you can use other items to control how long
      they are (a number of standard deviations) and how frequently they
      should be drawn (every n'th value, this is useful for spectra with many
      points when the error bars merge into each other).
    </p>
    <p>
      The <tt>X min to max</tt> item controls how the X axis of the plot is
      draw. When selected the minimum X coordinate will appear on the left and
      the maximum on the right. For your data this might correspond to the
      order of coordinates from the <tt>front</tt> to the <tt>back</tt> of the
      cube, or it may not. Deselecting this always places the coordinate from
      the front of the cube to the left.
    </p>
    <p>
      The <tt>Reference coordinate label</tt> option controls whether a simple
      numeric display of the coordinate of the reference line is shown at the
      upper left of the plot. This is a graphics item, so the font and colour
      can be controlled by the <tt>Graphics</tt> menu and the item can be
      moved (although these changes will be undone the next time that the plot
      is opened).
    </p>
    <p>
      The <tt>Extraction coordinate label</tt> option controls whether a
      simple readout of the current image coordinates at the point of spectral
      extraction of the spectrum is displayed in the lower left-hand part of
      the plot. This is a graphics item, so the font and colour can be
      controlled by the <tt>Graphics</tt> menu and the item can be moved
      (although these changes will be undone the next time that the plot is
      opened).
    </p>
    <p>
      <tt>Full coordinate label</tt> currently adds the filename to the
      extraction label as a prefix.
    </p>

    <h3>Saving the spectrum</h3>
    <p>
      You can save the currently extracted spectrum to three different data
      formats, NDF, FITS and TEXT. Just select the format you require from the
      <tt>File</tt> menu. The FITS format used is a 1D data array, with
      appropriate headers describing the coordinate system.
    </p>
    <p>
      The TEXT format is just columns of wavelength against data value, with a
      special header section that can be understood by the SPLAT-VO
      application.
    </p>

    <h3>The Interop menu</h3>
    <p>
      Using this menu you can send a copy of the currently displayed spectrum
      to any SAMP-enabled application that is registered (see the Interop
      menu in the main window for more about this option). SPLAT-VO can be
      contacted using this method, or it can be sent a spectrum without the
      need for SAMP support using the facilities in the spectral cube
      handling toolbox.
    </p>

    <h3>Taking a hardcopy</h3>
    <p>
      To either print a copy of the spectrum or save a copy to disk you can
      use the <tt>File</tt> <tt>Print</tt> option. Using the various options
      in the <tt>Options</tt> and <tt>Graphics</tt> menu you can change the
      various colours and fonts in use and add temporary annotations.
    </p>

    <h3>Why doesn't the log option work?</h3>
    <p>
      For either axis to be drawn using log spacing the limits cannot include
      the value zero. When this is detected the axes are drawn using a linear
      spacing and you will be warned. When this is true you can switch on
      the <tt>Positive X coordinates</tt> option. This will limit X
      coordinates to be greater than zero (so you may see some truncation or
      the spectrum overwriting to the left) and consequently the X axis will
      always be shown using log scaling.
    </p>
  </body>
</html>
